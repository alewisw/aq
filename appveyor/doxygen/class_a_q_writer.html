<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AQ: AQWriter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AQ
   &#160;<span id="projectnumber">0.0</span>
   </div>
   <div id="projectbrief">Multi-Producer Concurrent Allocating Queue</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_a_q_writer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AQWriter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements the writer side of a Multi-Producer Concurrent Allocating Queue.  
 <a href="class_a_q_writer.html#details">More...</a></p>

<p><code>#include &lt;AQWriter.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AQWriter:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_a_q_writer.png" usemap="#AQWriter_map" alt=""/>
  <map id="AQWriter_map" name="AQWriter_map">
<area href="class_a_q.html" title="Represents a Multi-Producer Concurrent Allocating Queue. " alt="AQ" shape="rect" coords="0,0,65,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aeebf829c023e70e4a358a15225f90be6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#aeebf829c023e70e4a358a15225f90be6">AQWriter</a> (void *mem, size_t memSize)</td></tr>
<tr class="memdesc:aeebf829c023e70e4a358a15225f90be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a queue writer object that uses the passed shared memory region mem of total size memSize bytes.  <a href="#aeebf829c023e70e4a358a15225f90be6">More...</a><br /></td></tr>
<tr class="separator:aeebf829c023e70e4a358a15225f90be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfec5d995bc6262d4381e630aae16bea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#adfec5d995bc6262d4381e630aae16bea">AQWriter</a> (const <a class="el" href="class_a_q_writer.html">AQWriter</a> &amp;other)</td></tr>
<tr class="memdesc:adfec5d995bc6262d4381e630aae16bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs this queue writer such that it references exactly the same underlying memory range as another queue writer.  <a href="#adfec5d995bc6262d4381e630aae16bea">More...</a><br /></td></tr>
<tr class="separator:adfec5d995bc6262d4381e630aae16bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f1d7b7322b0e47b2573f2ba7da844ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_a_q_writer.html">AQWriter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#a4f1d7b7322b0e47b2573f2ba7da844ed">operator=</a> (const <a class="el" href="class_a_q_writer.html">AQWriter</a> &amp;other)</td></tr>
<tr class="memdesc:a4f1d7b7322b0e47b2573f2ba7da844ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns the underlying memory range of this queue writer to exactly match the shared memory range of another queue writer.  <a href="#a4f1d7b7322b0e47b2573f2ba7da844ed">More...</a><br /></td></tr>
<tr class="separator:a4f1d7b7322b0e47b2573f2ba7da844ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a403cad7810a21611bf27c493241007fe"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#a403cad7810a21611bf27c493241007fe">~AQWriter</a> (void)</td></tr>
<tr class="memdesc:a403cad7810a21611bf27c493241007fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys this queue writer.  <a href="#a403cad7810a21611bf27c493241007fe">More...</a><br /></td></tr>
<tr class="separator:a403cad7810a21611bf27c493241007fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb5b715a284fc141a8671ebee3bd293"><td class="memItemLeft" align="right" valign="top">const volatile uint32_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#a6eb5b715a284fc141a8671ebee3bd293">freeCounter</a> (void) const </td></tr>
<tr class="memdesc:a6eb5b715a284fc141a8671ebee3bd293"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains a reference to a memory address that changes whenever space is made available in the queue for further write operations.  <a href="#a6eb5b715a284fc141a8671ebee3bd293">More...</a><br /></td></tr>
<tr class="separator:a6eb5b715a284fc141a8671ebee3bd293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412092999c2edc4612107512c86ab4b9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9">claim</a> (<a class="el" href="class_a_q_writer_item.html">AQWriterItem</a> &amp;item, size_t memSize, <a class="el" href="class_a_q_writer.html#a8f572d7d88ec7ed2462bda3ff42ffa93">ClaimSizeRule</a> claimSizeRule=<a class="el" href="class_a_q_writer.html#a8f572d7d88ec7ed2462bda3ff42ffa93acf9558ae64cffdb27a4ec0cffc2e0bff">CLAIM_EXACT</a>)</td></tr>
<tr class="memdesc:a412092999c2edc4612107512c86ab4b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Claims an item to be stored in the queue.  <a href="#a412092999c2edc4612107512c86ab4b9">More...</a><br /></td></tr>
<tr class="separator:a412092999c2edc4612107512c86ab4b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a598bba1f79e007e038ab76d8939a5b56"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q_writer.html#a598bba1f79e007e038ab76d8939a5b56">commit</a> (<a class="el" href="class_a_q_writer_item.html">AQWriterItem</a> &amp;item)</td></tr>
<tr class="memdesc:a598bba1f79e007e038ab76d8939a5b56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Commits an item previously obtained via a <a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9" title="Claims an item to be stored in the queue. ">claim()</a> call to the queue so that it is available for consumption by the <a class="el" href="class_a_q_reader.html" title="Implements the reader side of a Multi-Producer Concurrent Allocating Queue. ">AQReader</a>.  <a href="#a598bba1f79e007e038ab76d8939a5b56">More...</a><br /></td></tr>
<tr class="separator:a598bba1f79e007e038ab76d8939a5b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_a_q"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_a_q')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_a_q.html">AQ</a></td></tr>
<tr class="memitem:a40ff86ec57b5e791b7e20c14e372999f inherit pub_methods_class_a_q"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a40ff86ec57b5e791b7e20c14e372999f">isFormatted</a> (void) const </td></tr>
<tr class="memdesc:a40ff86ec57b5e791b7e20c14e372999f inherit pub_methods_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if the memory for this queue has been correctly formatted.  <a href="#a40ff86ec57b5e791b7e20c14e372999f">More...</a><br /></td></tr>
<tr class="separator:a40ff86ec57b5e791b7e20c14e372999f inherit pub_methods_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d869cae253ba0b35bd92cb38f647fda inherit pub_methods_class_a_q"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a7d869cae253ba0b35bd92cb38f647fda">isExtendable</a> (void) const </td></tr>
<tr class="memdesc:a7d869cae253ba0b35bd92cb38f647fda inherit pub_methods_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if this queue has been formatted with the extendable option.  <a href="#a7d869cae253ba0b35bd92cb38f647fda">More...</a><br /></td></tr>
<tr class="separator:a7d869cae253ba0b35bd92cb38f647fda inherit pub_methods_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47a5c88e8a23ec7a6e05f6d833c7d01 inherit pub_methods_class_a_q"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#ab47a5c88e8a23ec7a6e05f6d833c7d01">pageSize</a> (void) const </td></tr>
<tr class="memdesc:ab47a5c88e8a23ec7a6e05f6d833c7d01 inherit pub_methods_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the size of each page in the queue.  <a href="#ab47a5c88e8a23ec7a6e05f6d833c7d01">More...</a><br /></td></tr>
<tr class="separator:ab47a5c88e8a23ec7a6e05f6d833c7d01 inherit pub_methods_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee7e5627bf61ece4b47712d363aaeb9 inherit pub_methods_class_a_q"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a0ee7e5627bf61ece4b47712d363aaeb9">pageCount</a> (void) const </td></tr>
<tr class="memdesc:a0ee7e5627bf61ece4b47712d363aaeb9 inherit pub_methods_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the number of pages in the queue.  <a href="#a0ee7e5627bf61ece4b47712d363aaeb9">More...</a><br /></td></tr>
<tr class="separator:a0ee7e5627bf61ece4b47712d363aaeb9 inherit pub_methods_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526b75b1f633fc6f96b6591ff47ef515 inherit pub_methods_class_a_q"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a526b75b1f633fc6f96b6591ff47ef515">availableSize</a> (void) const </td></tr>
<tr class="memdesc:a526b75b1f633fc6f96b6591ff47ef515 inherit pub_methods_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the current maximum size of a single <a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> request.  <a href="#a526b75b1f633fc6f96b6591ff47ef515">More...</a><br /></td></tr>
<tr class="separator:a526b75b1f633fc6f96b6591ff47ef515 inherit pub_methods_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83b0ae9501fdbc209a26868ff4c64ac3 inherit pub_methods_class_a_q"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a83b0ae9501fdbc209a26868ff4c64ac3">claimContentionCount</a> (void) const </td></tr>
<tr class="memdesc:a83b0ae9501fdbc209a26868ff4c64ac3 inherit pub_methods_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the number of times contention has occurred during <a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> calls.  <a href="#a83b0ae9501fdbc209a26868ff4c64ac3">More...</a><br /></td></tr>
<tr class="separator:a83b0ae9501fdbc209a26868ff4c64ac3 inherit pub_methods_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_class_a_q"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_class_a_q')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="class_a_q.html">AQ</a></td></tr>
<tr class="memitem:ae5926cd2aa448ec7963d49c91fe0b0aa inherit pub_static_attribs_class_a_q"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#ae5926cd2aa448ec7963d49c91fe0b0aa">OPTION_CRC32</a> = 1 &lt;&lt; 0</td></tr>
<tr class="memdesc:ae5926cd2aa448ec7963d49c91fe0b0aa inherit pub_static_attribs_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">When formatting a queue set this flag to enable CRC-32 checksum calculation and validation over each item in the queue.  <a href="#ae5926cd2aa448ec7963d49c91fe0b0aa">More...</a><br /></td></tr>
<tr class="separator:ae5926cd2aa448ec7963d49c91fe0b0aa inherit pub_static_attribs_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c1b45770a35b703df2b1f1f17ca4745 inherit pub_static_attribs_class_a_q"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a8c1b45770a35b703df2b1f1f17ca4745">OPTION_LINK_IDENTIFIER</a> = 1 &lt;&lt; 1</td></tr>
<tr class="memdesc:a8c1b45770a35b703df2b1f1f17ca4745 inherit pub_static_attribs_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">When formatting a queue set this flag to attach a link identifier to each item.  <a href="#a8c1b45770a35b703df2b1f1f17ca4745">More...</a><br /></td></tr>
<tr class="separator:a8c1b45770a35b703df2b1f1f17ca4745 inherit pub_static_attribs_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa41d392733b3f668d4b5be8064e056 inherit pub_static_attribs_class_a_q"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056">OPTION_EXTENDABLE</a> = 1 &lt;&lt; 2</td></tr>
<tr class="memdesc:adaa41d392733b3f668d4b5be8064e056 inherit pub_static_attribs_class_a_q"><td class="mdescLeft">&#160;</td><td class="mdescRight">When formatting a queue set this flag to allow items to be extended in a linked list.  <a href="#adaa41d392733b3f668d4b5be8064e056">More...</a><br /></td></tr>
<tr class="separator:adaa41d392733b3f668d4b5be8064e056 inherit pub_static_attribs_class_a_q"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the writer side of a Multi-Producer Concurrent Allocating Queue. </p>
<p>Given a single memory region any number of writers in any number of threads may write into the queue at the same time. The <a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9" title="Claims an item to be stored in the queue. ">claim()</a> and <a class="el" href="class_a_q_writer.html#a598bba1f79e007e038ab76d8939a5b56" title="Commits an item previously obtained via a claim() call to the queue so that it is available for consu...">commit()</a> functions are thread-safe with respect to both reading and writing the queue with one exception. If the queue is concurrently formatted by the reader then the behavior is undefined. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a8f572d7d88ec7ed2462bda3ff42ffa93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_a_q_writer.html#a8f572d7d88ec7ed2462bda3ff42ffa93">AQWriter::ClaimSizeRule</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specifies the rule to use when claiming memory. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a8f572d7d88ec7ed2462bda3ff42ffa93acf9558ae64cffdb27a4ec0cffc2e0bff"></a>CLAIM_EXACT&#160;</td><td class="fielddoc">
<p>Claim an item consisting of at least the specified memory size. </p>
<p>The amount claimed will be at least the amount specified. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8f572d7d88ec7ed2462bda3ff42ffa93a9c2d8bfaa70c7ad982992fcd0ad98e48"></a>CLAIM_AT_MOST&#160;</td><td class="fielddoc">
<p>Claim an item consisting of at most the specified memory size. </p>
<p>The amount claimed can be less then the specified amount. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aeebf829c023e70e4a358a15225f90be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AQWriter::AQWriter </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>memSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a queue writer object that uses the passed shared memory region mem of total size memSize bytes. </p>
<p>This does not read or write the memory - it just sets up the internal pointers and references.</p>
<p>Before the queue can be accesed it must be formatted with <a class="el" href="class_a_q_reader.html#a8f3540da41dd5f50f4509bc62b23f2d3" title="Formats the shared memory for this queue so it can be used by the reader and writers. ">AQReader::format()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mem</td><td>The memory address where the queue is stored. </td></tr>
    <tr><td class="paramname">memSize</td><td>The total size of the memory region where the queue is stored. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adfec5d995bc6262d4381e630aae16bea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AQWriter::AQWriter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_a_q_writer.html">AQWriter</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs this queue writer such that it references exactly the same underlying memory range as another queue writer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>The other queue writer whose memory range is to be used by this queue. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a403cad7810a21611bf27c493241007fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AQWriter::~AQWriter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroys this queue writer. </p>
<p>Any outstanding <a class="el" href="class_a_q_writer_item.html" title="Encapsulates an item is being written to a Multi-Producer Concurrent Allocating Queue. ">AQWriterItem</a> objects otained by calling <a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> but not yet committed through <a class="el" href="class_a_q_writer.html#a598bba1f79e007e038ab76d8939a5b56" title="Commits an item previously obtained via a claim() call to the queue so that it is available for consu...">AQWriter::commit()</a> may no longer be accessed; accessing these objects results in undefined behavior.</p>
<p>The underlying memory of the queue is not impacted by this operation. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a412092999c2edc4612107512c86ab4b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AQWriter::claim </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_q_writer_item.html">AQWriterItem</a> &amp;&#160;</td>
          <td class="paramname"><em>item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>memSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_a_q_writer.html#a8f572d7d88ec7ed2462bda3ff42ffa93">ClaimSizeRule</a>&#160;</td>
          <td class="paramname"><em>claimSizeRule</em> = <code><a class="el" href="class_a_q_writer.html#a8f572d7d88ec7ed2462bda3ff42ffa93acf9558ae64cffdb27a4ec0cffc2e0bff">CLAIM_EXACT</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Claims an item to be stored in the queue. </p>
<p>The item consists of a memory region of size memSize bytes that is written into by the caller.</p>
<p>The value stored in the returned memory becomes available to the reader once the returned item is passed to <a class="el" href="class_a_q_writer.html#a598bba1f79e007e038ab76d8939a5b56" title="Commits an item previously obtained via a claim() call to the queue so that it is available for consu...">commit()</a>. It must be committed within the commit timeout period of the queue or it is automatically reclaimed. Writes to the item after the commit timeout has expired can result in data corruption for other items.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The writer item, supplied by the caller, which is updated with the allocated memory and related parameters. </td></tr>
    <tr><td class="paramname">memSize</td><td>The amount of memory that is required for this allocation. This field is treated slightly differently depending on the formatting options for the queue:<ul>
<li>If <a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056" title="When formatting a queue set this flag to allow items to be extended in a linked list. ">AQ::OPTION_EXTENDABLE</a> is not set this represents exactly the number of bytes occupied by this item. It cannot be subsequetly changed or altered in any way. <a class="el" href="class_a_q_item.html#a346237d15617f812d325c173f21892b9" title="Obtains the total number of bytes that have been stored by the user into this item. ">AQWriterItem::size()</a> and <a class="el" href="class_a_q_item.html#aba43b837efe456e423cf290b7bdae608" title="Obtains the total number of bytes that can be stored in this item. ">AQWriterItem::capacity()</a> will always return this value.</li>
<li>If <a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056" title="When formatting a queue set this flag to allow items to be extended in a linked list. ">AQ::OPTION_EXTENDABLE</a> is set then this is the minimum size for the first item in the linked-list of extendable items. The AQWriteItem::size() will initially be set to 0, while the AQWriteItem::capacity() will be at least memSize although it may be more. </li>
</ul>
</td></tr>
    <tr><td class="paramname">claimSizeRule</td><td>Indicates how the <code>memSize</code> field is interpreted. When set to ClaimSizeRule::CLAIM_EXACT the allocated memory is at least that required by <code>memSize</code> (dependent on <a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056" title="When formatting a queue set this flag to allow items to be extended in a linked list. ">AQ::OPTION_EXTENDABLE</a>). When set to ClaimSizeRule::CLAIM_AT_MOST the allocated memory can be less than the specified amount. It will never be less if there was enough space in the queue to satisfy the request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the region could be claimed then true is returned and item updated to contain the valid memory. If the item could not be claimed then false is returned and item is marked as not allocated (<a class="el" href="class_a_q_item.html#a21513e2a0208dbbd000c1821913ff595" title="Determins if this item has been allocated to part of a queue. ">AQItem::isAllocated()</a> returns false). </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::invalid_argument</td><td>When the memSize parameter is greater than the maximum allocation size for an <a class="el" href="class_a_q.html" title="Represents a Multi-Producer Concurrent Allocating Queue. ">AQ</a> (1 MB) or when the queue is not extendable (<a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056" title="When formatting a queue set this flag to allow items to be extended in a linked list. ">AQ::OPTION_EXTENDABLE</a> is not set) and the memSize parameter was 0. </td></tr>
    <tr><td class="paramname"><a class="el" href="class_a_q_unformatted_exception.html" title="The exception that is thrown when an attempt is made to access an unformatted queue. ">AQUnformattedException</a></td><td>When the queue is not formatted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a598bba1f79e007e038ab76d8939a5b56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AQWriter::commit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_a_q_writer_item.html">AQWriterItem</a> &amp;&#160;</td>
          <td class="paramname"><em>item</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Commits an item previously obtained via a <a class="el" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9" title="Claims an item to be stored in the queue. ">claim()</a> call to the queue so that it is available for consumption by the <a class="el" href="class_a_q_reader.html" title="Implements the reader side of a Multi-Producer Concurrent Allocating Queue. ">AQReader</a>. </p>
<p>Once this function is called the claimed memory must no longer be accessed or the results are undefined.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">item</td><td>The item to commit. When this function returns this item is marked as not allocated (<a class="el" href="class_a_q_item.html#a21513e2a0208dbbd000c1821913ff595" title="Determins if this item has been allocated to part of a queue. ">AQWriterItem::isAllocated()</a> returns false). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the commit succeeded or false if it fails; the commit fails if the claimed item was treated as incomplete by the reader due to begin held for a period longer than the commit timeout. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">invalid_argument</td><td>If the passed item is invalid (i.e., is not currently claimed, is not in the queue, or is already committed). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6eb5b715a284fc141a8671ebee3bd293"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const volatile uint32_t &amp; AQWriter::freeCounter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains a reference to a memory address that changes whenever space is made available in the queue for further write operations. </p>
<p>This can be used as a cheap method of polling for 'space available'.</p>
<p>The main purpose of this is to implement efficient polling: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> pollClaim(<a class="code" href="class_a_q_writer.html">AQWriter</a>&amp; writer, <a class="code" href="class_a_q_writer_item.html">AQWriterItem</a>&amp; item, <span class="keywordtype">size_t</span> memSize)</div><div class="line">{</div><div class="line">    <span class="keyword">const</span> <span class="keyword">volatile</span> uint32_t&amp; <a class="code" href="class_a_q_writer.html#a6eb5b715a284fc141a8671ebee3bd293">freeCounter</a> = writer.<a class="code" href="class_a_q_writer.html#a6eb5b715a284fc141a8671ebee3bd293">freeCounter</a>();</div><div class="line">    uint32_t count = <a class="code" href="class_a_q_writer.html#a6eb5b715a284fc141a8671ebee3bd293">freeCounter</a>;</div><div class="line">    <span class="keywordflow">while</span> (!writer.<a class="code" href="class_a_q_writer.html#a412092999c2edc4612107512c86ab4b9">claim</a>(item, memSize))</div><div class="line">    {</div><div class="line">        <span class="keywordflow">while</span> (count == freeCounter)</div><div class="line">        {</div><div class="line">            ... perform some other processing, sleep, etc ...</div><div class="line">        }</div><div class="line">        count = <a class="code" href="class_a_q_writer.html#a6eb5b715a284fc141a8671ebee3bd293">freeCounter</a>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>A reference to an integer whose value changes whenever space is made available in the queue. </dd></dl>

</div>
</div>
<a class="anchor" id="a4f1d7b7322b0e47b2573f2ba7da844ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_a_q_writer.html">AQWriter</a> &amp; AQWriter::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_a_q_writer.html">AQWriter</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assigns the underlying memory range of this queue writer to exactly match the shared memory range of another queue writer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>The other queue writer whose memory range is to be used by this queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A reference to this object. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>AQWriter.h</li>
<li>AQWriter.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun May 1 2016 10:50:06 for AQ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
