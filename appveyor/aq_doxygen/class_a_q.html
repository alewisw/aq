<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>AQ: AQ Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AQ
   &#160;<span id="projectnumber">0.0</span>
   </div>
   <div id="projectbrief">Multi-Producer Concurrent Allocating Queue</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_a_q-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AQ Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents a Multi-Producer Concurrent Allocating Queue.  
 <a href="class_a_q.html#details">More...</a></p>

<p><code>#include &lt;AQ.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for AQ:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_a_q.png" usemap="#AQ_map" alt=""/>
  <map id="AQ_map" name="AQ_map">
<area href="class_a_q_reader.html" title="Implements the reader side of a Multi-Producer Concurrent Allocating Queue. " alt="AQReader" shape="rect" coords="0,56,72,80"/>
<area href="class_a_q_writer.html" title="Implements the writer side of a Multi-Producer Concurrent Allocating Queue. " alt="AQWriter" shape="rect" coords="82,56,154,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a40ff86ec57b5e791b7e20c14e372999f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a40ff86ec57b5e791b7e20c14e372999f">isFormatted</a> (void) const </td></tr>
<tr class="memdesc:a40ff86ec57b5e791b7e20c14e372999f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if the memory for this queue has been correctly formatted.  <a href="#a40ff86ec57b5e791b7e20c14e372999f">More...</a><br /></td></tr>
<tr class="separator:a40ff86ec57b5e791b7e20c14e372999f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d869cae253ba0b35bd92cb38f647fda"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a7d869cae253ba0b35bd92cb38f647fda">isExtendable</a> (void) const </td></tr>
<tr class="memdesc:a7d869cae253ba0b35bd92cb38f647fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if this queue has been formatted with the extendable option.  <a href="#a7d869cae253ba0b35bd92cb38f647fda">More...</a><br /></td></tr>
<tr class="separator:a7d869cae253ba0b35bd92cb38f647fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47a5c88e8a23ec7a6e05f6d833c7d01"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#ab47a5c88e8a23ec7a6e05f6d833c7d01">pageSize</a> (void) const </td></tr>
<tr class="memdesc:ab47a5c88e8a23ec7a6e05f6d833c7d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the size of each page in the queue.  <a href="#ab47a5c88e8a23ec7a6e05f6d833c7d01">More...</a><br /></td></tr>
<tr class="separator:ab47a5c88e8a23ec7a6e05f6d833c7d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee7e5627bf61ece4b47712d363aaeb9"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a0ee7e5627bf61ece4b47712d363aaeb9">pageCount</a> (void) const </td></tr>
<tr class="memdesc:a0ee7e5627bf61ece4b47712d363aaeb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the number of pages in the queue.  <a href="#a0ee7e5627bf61ece4b47712d363aaeb9">More...</a><br /></td></tr>
<tr class="separator:a0ee7e5627bf61ece4b47712d363aaeb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526b75b1f633fc6f96b6591ff47ef515"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a526b75b1f633fc6f96b6591ff47ef515">availableSize</a> (void) const </td></tr>
<tr class="memdesc:a526b75b1f633fc6f96b6591ff47ef515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the current maximum size of a single <a class="el" href="class_a_q_writer.html#ae0e2eeac326abd648b6aa60a1fb5315a" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> request.  <a href="#a526b75b1f633fc6f96b6591ff47ef515">More...</a><br /></td></tr>
<tr class="separator:a526b75b1f633fc6f96b6591ff47ef515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83b0ae9501fdbc209a26868ff4c64ac3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a83b0ae9501fdbc209a26868ff4c64ac3">claimContentionCount</a> (void) const </td></tr>
<tr class="memdesc:a83b0ae9501fdbc209a26868ff4c64ac3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtains the number of times contention has occurred during <a class="el" href="class_a_q_writer.html#ae0e2eeac326abd648b6aa60a1fb5315a" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> calls.  <a href="#a83b0ae9501fdbc209a26868ff4c64ac3">More...</a><br /></td></tr>
<tr class="separator:a83b0ae9501fdbc209a26868ff4c64ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae5926cd2aa448ec7963d49c91fe0b0aa"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#ae5926cd2aa448ec7963d49c91fe0b0aa">OPTION_CRC32</a> = 1 &lt;&lt; 0</td></tr>
<tr class="memdesc:ae5926cd2aa448ec7963d49c91fe0b0aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">When formatting a queue set this flag to enable CRC-32 checksum calculation and validation over each item in the queue.  <a href="#ae5926cd2aa448ec7963d49c91fe0b0aa">More...</a><br /></td></tr>
<tr class="separator:ae5926cd2aa448ec7963d49c91fe0b0aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c1b45770a35b703df2b1f1f17ca4745"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#a8c1b45770a35b703df2b1f1f17ca4745">OPTION_LINK_IDENTIFIER</a> = 1 &lt;&lt; 1</td></tr>
<tr class="memdesc:a8c1b45770a35b703df2b1f1f17ca4745"><td class="mdescLeft">&#160;</td><td class="mdescRight">When formatting a queue set this flag to attach a link identifier to each item.  <a href="#a8c1b45770a35b703df2b1f1f17ca4745">More...</a><br /></td></tr>
<tr class="separator:a8c1b45770a35b703df2b1f1f17ca4745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa41d392733b3f668d4b5be8064e056"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056">OPTION_EXTENDABLE</a> = 1 &lt;&lt; 2</td></tr>
<tr class="memdesc:adaa41d392733b3f668d4b5be8064e056"><td class="mdescLeft">&#160;</td><td class="mdescRight">When formatting a queue set this flag to allow items to be extended in a linked list.  <a href="#adaa41d392733b3f668d4b5be8064e056">More...</a><br /></td></tr>
<tr class="separator:adaa41d392733b3f668d4b5be8064e056"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents a Multi-Producer Concurrent Allocating Queue. </p>
<p>This gives basic information about the queue and encapsulates its memory, however it does not provide any mechanism to read or write the queue. This is done by constructing any number of <a class="el" href="class_a_q_writer.html" title="Implements the writer side of a Multi-Producer Concurrent Allocating Queue. ">AQWriter</a> objects for writing, and one <a class="el" href="class_a_q_reader.html" title="Implements the reader side of a Multi-Producer Concurrent Allocating Queue. ">AQReader</a> object for reading the queue. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a526b75b1f633fc6f96b6591ff47ef515"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t AQ::availableSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the current maximum size of a single <a class="el" href="class_a_q_writer.html#ae0e2eeac326abd648b6aa60a1fb5315a" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> request. </p>
<p>This may be less than the actual amount of space available in the queue because this returns the maximum contiguous allocation. If the queue has been split (i.e, there are two unused sections) it will be the size of the largest of the two sections.</p>
<dl class="section return"><dt>Returns</dt><dd>The maximum number of contiguous bytes that can be allocated from the queue at the current time. </dd></dl>

</div>
</div>
<a class="anchor" id="a83b0ae9501fdbc209a26868ff4c64ac3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t AQ::claimContentionCount </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the number of times contention has occurred during <a class="el" href="class_a_q_writer.html#ae0e2eeac326abd648b6aa60a1fb5315a" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> calls. </p>
<p>Contention occurs when two threads call <a class="el" href="class_a_q_writer.html#ae0e2eeac326abd648b6aa60a1fb5315a" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> at the same time resulting in only one thread succeeding and the second thread needing to perform a retry. Contention can be seen as wasted time - so the higher the contention the more wasted CPU cycles are occuring when claiming items from the queue.</p>
<dl class="section return"><dt>Returns</dt><dd>The monotonically increasing contention counter. When the counter reaches its limit (4,294,967,295) it wraps back to 0. </dd></dl>

</div>
</div>
<a class="anchor" id="a7d869cae253ba0b35bd92cb38f647fda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AQ::isExtendable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if this queue has been formatted with the extendable option. </p>
<p>In extendable mode (<a class="el" href="class_a_q.html#adaa41d392733b3f668d4b5be8064e056" title="When formatting a queue set this flag to allow items to be extended in a linked list. ">AQ::OPTION_EXTENDABLE</a> set when <a class="el" href="class_a_q_reader.html#a8f3540da41dd5f50f4509bc62b23f2d3" title="Formats the shared memory for this queue so it can be used by the reader and writers. ">AQReader::format()</a> was called) items can be extended in a linked-list arrangement.</p>
<dl class="section return"><dt>Returns</dt><dd>True if the queue is formatted in extendable mode, false if it is not formatted or was not formatted in extendable mode. </dd></dl>

</div>
</div>
<a class="anchor" id="a40ff86ec57b5e791b7e20c14e372999f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AQ::isFormatted </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if the memory for this queue has been correctly formatted. </p>
<p>It is not possible to access a queue unless the memory has been formatted.</p>
<dl class="section return"><dt>Returns</dt><dd>true if the queue memory is correctly formatted or false if the queue memory is not formatted. </dd></dl>

</div>
</div>
<a class="anchor" id="a0ee7e5627bf61ece4b47712d363aaeb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t AQ::pageCount </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the number of pages in the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of pages in the queue. If the queue is not formatted then 0 is returned. </dd></dl>

</div>
</div>
<a class="anchor" id="ab47a5c88e8a23ec7a6e05f6d833c7d01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t AQ::pageSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtains the size of each page in the queue. </p>
<p>Using an integer multiple of <a class="el" href="class_a_q.html#ab47a5c88e8a23ec7a6e05f6d833c7d01" title="Obtains the size of each page in the queue. ">pageSize()</a> for memory allocation results in the most efficient use of the queue memory.</p>
<dl class="section return"><dt>Returns</dt><dd>The size, in bytes, of each page in the queue. If the queue is not formatted then 0 is returned. </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ae5926cd2aa448ec7963d49c91fe0b0aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t AQ::OPTION_CRC32 = 1 &lt;&lt; 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When formatting a queue set this flag to enable CRC-32 checksum calculation and validation over each item in the queue. </p>

</div>
</div>
<a class="anchor" id="adaa41d392733b3f668d4b5be8064e056"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t AQ::OPTION_EXTENDABLE = 1 &lt;&lt; 2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When formatting a queue set this flag to allow items to be extended in a linked list. </p>
<p>This is generally only suitable when the full length of the item cannot be known when <a class="el" href="class_a_q_writer.html#ae0e2eeac326abd648b6aa60a1fb5315a" title="Claims an item to be stored in the queue. ">AQWriter::claim()</a> is called. When this option is enable the <a class="el" href="class_a_q_item.html#a8e2e1414d09863cf3b733119a068dbb8" title="Obtains the link identifier for this item. ">AQItem::linkIdentifier()</a> is used to track the linked-list of items. As such the application can no longer use <a class="el" href="class_a_q_writer_item.html#a52f19448fb3ca5fd9e1afbeb7d60027a" title="Sets the link identifier for this item. ">AQWriterItem::setLinkIdentifier()</a> as any value set there will be overridden when the item is committed to the queue. </p>

</div>
</div>
<a class="anchor" id="a8c1b45770a35b703df2b1f1f17ca4745"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t AQ::OPTION_LINK_IDENTIFIER = 1 &lt;&lt; 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When formatting a queue set this flag to attach a link identifier to each item. </p>
<p>This allows the <a class="el" href="class_a_q_writer_item.html#a52f19448fb3ca5fd9e1afbeb7d60027a" title="Sets the link identifier for this item. ">AQWriterItem::setLinkIdentifier()</a> function to be called, and it value to be available on the retreived item via <a class="el" href="class_a_q_item.html#a8e2e1414d09863cf3b733119a068dbb8" title="Obtains the link identifier for this item. ">AQItem::linkIdentifier()</a>. This functionality is only available if OPTION_EXTENDABLE is not also configured as OPTION_EXTENDABLE uses the link identifier to manage its linked-list of items. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>AQ.h</li>
<li>AQ.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon May 9 2016 23:27:09 for AQ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
